{% extends "../theme/personal.html" %}
{% block typebody %}
<script type="text/javascript">
    $().ready(function () {
        $("#form_regist").validate(
                {
                    rules: {
                        user_name: {
                            required: true,
                            rangelength: [5, 16]
                        },
                        user_pass: {
                            required: true,
                            rangelength: [6, 20]
                        },
                        user_pass2: {
                            required: true,
                            equalTo: "#user_pass"
                        },
                        user_email: {
                            required: true,
                            email: true
                        }
                    },
                    messages: {
                        user_name: {
                            required: "<span class='red'>Please enter your user name</span>",
                            rangelength: "<span class='red'>The user name for at least five, up to 16</span>"
                        },

                        user_pass: {
                            required: "<span class='red'>Please enter the password</span>",
                            rangelength: "<span class='red'>Password for at least six, up to 20 </span>"
                        },
                        user_pass2: {
                            required: "<span class='red'>Please enter the password</span>",
                            equalTo: "<span class='red'>Enter the password twice</span>"
                        },
                        user_email: {
                            required: "<span class='red'>Please enter a correct E-mail </span>",
                            email: "<span class='red'>Please enter a correct E-mail</span>"
                        }
                    }
                }
        );
    });
</script>

<div class="row regist">
    <div class="panel panel-black">
    <div class="panel-heading"><b>{{ _('Regist') }} </b></div>
    <div class="panel-body">
        <div class="row" id="hiddeniframe">
            <button onclick="hiddeniframe()"> X </button>
        </div>
        <div class="row" id="avatar" style="display: none;">
            <iframe src="/user/avatar" frameborder="0" width="100%" height="900px"></iframe>
        </div>
        <form id="form_regist" action="/user/regist" method="post" class="form-horizontal" role="form">
            <fieldset>
                <div class="form-group avatar-group">
                    <label class="col-sm-2 control-label" for="user_name">{{ _('User avatar') }}： </label>
                    <div class="col-sm-10">
                        <div class="row">
                            <div class="col-sm-2">
                                <div class="avatar">
                                    <img id="img-avatar" src='https://avataaars.io/?avatarStyle=Circle&topType=LongHairStraightStrand&accessoriesType=Prescription01&hairColor=Platinum&facialHairType=MoustacheFancy&facialHairColor=Red&clotheType=CollarSweater&clotheColor=Blue01&eyeType=Happy&eyebrowType=SadConcerned&mouthType=ScreamOpen&skinColor=Light'
                                    />
                                </div>
                            </div>
                            <div class="col-sm-10 random">
                                <button type="button" class="btn btn-info" onclick="showiframe()">{{ _('Generate') }}</button>
                            </div>
                        </div>    
                    </div>
                </div>
                <div class="form-group" style="display: none;">
                    <label class="col-sm-2 control-label" for="user_avatar">{{ _('User avatar') }}： </label>

                    <div class="col-sm-10">
                        <input class="form-control" id='user_avatar' type="text" name="user_avatar">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label" for="user_name">{{ _('User name') }}： </label>

                    <div class="col-sm-10">
                        <input class="form-control" id='user_name' type="text" name="user_name"
                               placeholder="User name must be alphabetic or alphanumeric combination (letter).">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label" for="user_pass">{{ _('Password') }}：</label>

                    <div class="col-sm-10">
                        <input class="form-control" id="user_pass" type="password" name="user_pass"
                               placeholder="Password at least 6, the longest 20. ">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label" for="user_pass2">{{ _('Confirm password') }}：</label>

                    <div class="col-sm-10">
                        <input class="form-control" id="user_pass2" type="password" name="user_pass2"
                               placeholder="Please confirm and password input. ">
                    </div>
                </div>
                <div class="form-group" style="display: none;">
                    <label class="col-sm-2 control-label" for="user_email">{{ _('Email') }} ：</label>

                    <div class="col-sm-10">
                        <input class="form-control" id="user_email" type="email" name="user_email"
                               placeholder="Please enter a correct E-mail.">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label" for="sub1"></label>

                    <div class="col-sm-10">
                        <button id="sub1" type="submit" class="btn btn-primary">{{ _('Submit') }}</button>
                    </div>
                </div>
            </fieldset>
        </form>
    </div>
</div>
</div>
<script type="text/javascript">
    function showiframe(){
        $('#avatar').css('display', 'block');
        $('#hiddeniframe').css('display', 'block');
    }
    function hiddeniframe(){
        $('#avatar').css('display', 'none');
        $('#hiddeniframe').css('display', 'none');
        var src = $('#img-avatar')[0].src;
        $('#user_avatar').val(src)
    }
    function GetChildValue(src_text){
        document.getElementById('img-avatar').src = src_text;
    }
</script>
<style>
    div.avatar {
        width: 40%;
    }

    div.avatar-group label {
        margin-top: 20px;
        margin-bottom: 20px;
    }
    div.random button {
        margin-top: 20px;
        margin-bottom: 20px; 
    }
    div#hiddeniframe {
        text-align: center;
        display: none;
    }
</style>
{% end %}

